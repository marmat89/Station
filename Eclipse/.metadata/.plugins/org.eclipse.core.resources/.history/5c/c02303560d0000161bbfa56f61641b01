package it.unibo.system;

import it.unibo.util.Configurator;

import java.io.IOException;
import java.sql.*;

/**
 * 
 * db com serves to communicate with the server, mainly deals with creating
 * queries or turn them over to the server, format the data as required and
 * return them. Need USER e PASSWORD per il DB, il PATH DEL DB.
 * 
 * @author matteo.mariani11@studio.unibo.it
 * @version 1.0.0
 * @since 07/feb/2015 14:11:36
 *
 */
public class DbCom extends CommunicatorSQL {
	Connection db;
	private String user;
	private String password;
	private String path;
	String TABLE;
	String componentsTable;
	Configurator conf;
	String dbName;

	/**
	 * DataBase Communication Constructor set param for connection get from conf
	 * file
	 */
	public DbCom() {
		conf = new Configurator("conf.xml", "configuration");
		user = conf.getTagValueSTR("DB_USER");
		password = conf.getTagValueSTR("DB_PASS");
		path = conf.getTagValueSTR("DB_PATH");
		dbName = conf.getTagValueSTR("DB_NAME");
		try {
			Class.forName("com.mysql.jdbc.Driver").newInstance();
			db = DriverManager.getConnection(path + dbName + "?user=" + user
					+ "&password=" + password);
		} catch (InstantiationException | IllegalAccessException
				| ClassNotFoundException e) {
			e.printStackTrace();
		} catch (SQLException e) {
			e.printStackTrace();
		}
	}

	public static void main(String Args[]) throws SQLException,
			ClassNotFoundException, IllegalAccessException,
			InstantiationException, IOException {
		DbCom c = new DbCom();

	}
}